(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const D=document.querySelector(".hero-banner"),I=document.querySelector(".hero-div"),l=document.querySelector(".answer"),y=document.querySelector(".question h3"),A=document.querySelector("#textArea"),x=document.querySelector(".progress__container"),N="https://www.themirrorapp.io/questions",R=document.querySelector(".Download"),P=document.querySelector(".interaction__container"),E=document.querySelector(".loading-response"),b=document.querySelector(".result"),H=document.getElementById("form-container");let d=y.dataset.set,c=[];async function B(t,e){const i=await(await fetch(t)).text();H.innerHTML=i,e&&e()}async function M(t){for(let e=0;e<t.length;e++)await new Promise(o=>setTimeout(o,40)),y.textContent+=t.charAt(e),t.length>400&&(y.style.fontSize="1.8em",y.style.lineHeight="1.3");l.disabled=!1}async function $(t){if(x.querySelector(`div[data-step='${d}']`).classList.add("complete"),y.textContent="",d++,d<=3)M(t),x.querySelector(`div[data-step='${d}']`).classList.add("active"),document.querySelector(".current-question").textContent=d;else{const o=t;c=[...c,{role:"assistant",content:o}];const i=document.querySelector(".insightText"),s=document.querySelector(".tasksList"),n=document.querySelector(".resourcesList");n.innerHTML="";const a=/%%Insight: (.+?)\n\n/s,u=/%%Tasks:([\s\S]*?)\n\n/s,r=/%%Resources:([\s\S]*?)\n\n/s,h=o.match(a),p=o.match(u),S=o.match(r);console.log("Insight:",h),console.log("Tasks Match:",p),console.log("Resources Match:",S);const q=h&&h[1],L=p&&p[1],k=S&&S[1];if(q&&(console.log("Insight:",q),i.textContent=q),L&&(console.log("Tasks:",L),s.innerHTML="",L.trim().split(`
`).forEach(T=>{const f=document.createElement("li");f.textContent=T.trim(),s.appendChild(f)})),k){console.log("Resources:",k),n.innerHTML="";const T=/(.+?) - \[(.+?)\]/g;k.trim().split(`
`).forEach(f=>{const v=T.exec(f);if(v){const m=document.createElement("li"),w=document.createElement("a");w.href=v[2],w.target="_blank",w.textContent=v[2],m.textContent=`${v[1]} - `,m.appendChild(w),n.appendChild(m)}else{const m=document.createElement("li");m.textContent=f.trim(),n.appendChild(m)}})}Y()}}async function Y(){P.style.transform="translateY(-200%)",E.classList.remove("hidden"),await new Promise(t=>setTimeout(t,200)),P.classList.add("hidden"),await new Promise(t=>setTimeout(t,2e3)),E.style.transform="translateY(-200%)",await new Promise(t=>setTimeout(t,400)),b.classList.remove("hidden"),b.style.transform="translateY(0)",E.classList.add("hidden")}function C(t){const e=document.querySelector(".errorMessage"),o=document.querySelector(".errorDiv");o.style.height="auto",e.textContent=t,e.style.transform="translateY(0)",e.style.opacity="1",setTimeout(()=>{e.style.transform="translateY(-100%)",e.style.opacity="0"},2e3),setTimeout(()=>{o.style.height="0",e.textContent=""},2400)}function g(t){const e=document.querySelector(t);return e.value.trim()===""?(e.classList.add("error","shake"),e.addEventListener("animationend",()=>{e.classList.remove("error","shake")}),!1):!0}async function F(){return(await(await fetch(N,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({prompt:c})})).json()).message.trim()}function j(){const t=document.querySelector(".radioBtn:checked");if(t){const e=`/assets/components/${t.value}.html`;B(e,O)}}document.querySelectorAll(".radioBtn").forEach(t=>{t.addEventListener("click",()=>{const e=`/assets/components/${t.value}.html`;B(e,O)})});j();function O(){const t=document.querySelector("button.generate-question");t&&t.addEventListener("click",async e=>{e.preventDefault();const i=e.target.getAttribute("data-btn");if(i==="self-reflect"){const n=document.querySelector("#userName").value,a=document.querySelector("#focusArea").value,u=document.querySelector("#focusAreaDetail").value,r=g("#userName"),h=g("#focusArea"),p=g("#focusAreaDetail");if(!r||!h||!p){C("Please fill in the empty fields");return}c=[{role:"system",content:`Background:
You are a professional life and mental coach. You possess an extensive knowledge base of coaching techniques, psychological theories, mindfulness practices, and personal development strategies. Your primary aim is to facilitate self-reflection, personal growth, and mental well-being in your clients.

Qualities:

Empathetic: Display deep understanding and consideration for the client’s feelings and perspectives.
Non-judgmental: Offer a safe, open space for the client to explore thoughts and feelings without fear of criticism.
Encouraging: Motivate the client through positive reinforcement and celebrate their progress.
Knowledgeable: Draw upon a wide array of coaching methods and psychological principles.
Attentive: Listen actively and respond to both the content and emotion in the client's statements.
Adaptive: Tailor your approach to the unique needs and responses of the client.
Ethical: Maintain confidentiality, and professionalism, and abide by appropriate coaching boundaries.

Conversational Manner:

Use conversational markers like "Hmm," "I see," and "Tell me more," to mimic active listening.
Phrase your questions to invite elaboration, e.g., “What does that experience mean to you?”
Reflect on the client’s statements occasionally to show understanding, e.g., “It sounds like you’re saying…”
Utilize pauses effectively, allowing the client space to think and respond.
Session Goals:

Help the client set clear, attainable goals for personal or professional development.
Guide the client in exploring their thoughts and feelings to understand underlying patterns or beliefs.
Aid the client in developing strategies to overcome obstacles or mental blocks.
Encourage self-discovery and the identification of personal values and strengths.
When to Use Exercises and Strategies:

If the client is stuck, suggest a relevant exercise to facilitate deeper insight, such as journaling prompts or mindfulness techniques.
Offer cognitive-behavioural strategies when the client encounters distorted thinking patterns.
Introduce problem-solving exercises when the client is facing decision-making difficulties.
Provide stress reduction techniques when the client expresses feeling overwhelmed.

Limitations:

Avoid providing direct advice; instead, empower the client to arrive at their own conclusions.
Do not engage in clinical psychological treatment or diagnose mental health conditions.
Encourage clients to seek other professional help if their issues are beyond the scope of coaching.

Interactions:

Begin each session with a check-in on the client’s current state and feelings.
Maintain a balance between guiding the conversation and allowing the client to lead.
Use open-ended questions to facilitate depth in conversation.
Close each session with a summary of insights gained and an action plan moving forward.
Data Protection:

Reassure the client that their data and conversations are kept confidential.
Do not store any personal information beyond what is necessary for the continuity of coaching sessions.`},{role:"user",content:`Act as an expert life and mental coach specialized in ${a},  guide clients in improving their daily lives by setting goals, identifying obstacles, and creating strategies. Use active listening, clear communication, goal-setting, an action-oriented approach, trust, confidentiality, adaptability, and positive reinforcement. Begin a session with ${n}, They come to you to discuss: '${u}'. Start with a non-overwhelming question for self-reflection. Address the client as ${n} and use a friendly tone. Your first response: Welcome ${n}, [First Question].`}]}else if(i==="vant"){const n=document.querySelector("#userName").value,a=document.querySelector("#vanting").value,u=g("#vanting");if(!g("#userName")||!u){C("Please fill in the empty fields");return}c=[{role:"system",content:"You are an experienced life and mental coach. Start by asking your client the first question, which should encourage self-reflection. Follow the User instructions to complete the interaction. "},{role:"user",content:`As a skilled life and mental coach, guide clients to improve their relationships, careers, and lives by setting clear goals, identifying obstacles, and creating strategies to overcome challenges. Follow these coaching principles: Active Listening, Clear Communication, Goal-Setting, Action-Oriented Approach, Trust and Confidentiality, Flexibility and Adaptability, Positive Reinforcement. Engage in a session with ${n} who shares their emotions in '${a}'. Begin with empathy without overwhelming them. Address them as ${n}. Start the conversation with: Hello ${n}[response]. Use a friendly tone and speak in the first person.`}]}t.disabled=!0,t.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Generating...';const s=await F();c.push({role:"assistant",content:s}),d=1,l.disabled=!0,I.classList.add("moveOut"),D.classList.add("moveIn"),setTimeout(()=>{x.querySelector("div[data-step='1']").classList.add("active"),I.classList.add("hidden")},500),M(s)})}l.addEventListener("click",async function(t){t.preventDefault();const e=A.value.trim();if(!e){C("Please enter your response");return}l.disabled=!0,l.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Sending...';let o;d===3?o=e+". Share an insight, assign three tasks for the next session, and suggest resources. Ensure tasks are manageable, trackable, and attainable. Format: %%Insight: <Insight>  %%Tasks: 1.<Task 1> 2.<Task 2> 3.<Task 3>  %%Resources: <resource 1> <resource 2> <resource 3>  Conclusion.  The '%%' separates the response into sections, so don't avoid it and only add it to the beginning.":o=" Provide a follow-up question that will help you to understand the client's perspective on their reflection. "+e,c=[...c,{role:"user",content:o}];try{const n=(await(await fetch(N,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({prompt:c})})).json()).message.trim(),a={role:"assistant",content:n};c.push(a),l.innerHTML="Answer",l.disabled=!0,A.value="",$(n)}catch(i){console.error(i)}});R.addEventListener("click",()=>{const t=document.querySelector(".DownloadReport");b.style.transform="translateY(200%)",b.classList.add("hidden"),t.classList.remove("hidden"),setTimeout(()=>{window.scrollTo(0,0),t.style.transform="translateY(0)"},500)});const V=Stripe("pk_live_UokfO3BfglTlhkt0XZ4HJtQe");document.getElementById("donation-form").addEventListener("submit",async t=>{t.preventDefault();const e=parseFloat(document.getElementById("donation-amount").value)*100,i=await(await fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})})).text();console.log("Response from server:",i);const{client_secret:s}=JSON.parse(i),n=await V.confirmCardPayment(s,{payment_method:{card:cardElement}});n.error?console.error(n.error.message):console.log("Donation successful:",n.paymentIntent)});document.querySelector(".SubmitInfo").addEventListener("click",async t=>{t.preventDefault();const e=t.target,o=document.getElementById("greeting"),i=userName,s=document.getElementById("email").value,n="83635650801174350";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){document.getElementById("email").classList.add("error","shake"),setTimeout(()=>{document.getElementById("email").classList.remove("error","shake")},1e3),e.disabled=!1,e.innerHTML="Submit Info";return}if(i&&s){e.disabled=!0,e.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...';try{const r=await fetch("https://www.themirrorapp.io/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,name:i,groupId:n})});r.ok?(o.textContent="Thanks for signing up! I'll be in touch soon.",console.log("Successfully added subscriber:",await r.json()),e.disabled=!1,e.classList.add("hidden")):(o.textContent="Something went wrong. Please try again.",console.error("Error adding subscriber:",await r.json()))}catch(r){console.error("Error adding subscriber:",r)}}});
