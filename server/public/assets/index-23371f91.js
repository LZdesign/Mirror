(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const O=document.querySelector(".hero-banner"),I=document.querySelector(".hero-div"),l=document.querySelector(".answer"),m=document.querySelector(".question h3"),C=document.querySelector("#textArea"),S=document.querySelector(".progress__container"),B="https://www.themirrorapp.io/questions",D=document.querySelector(".Download"),E=document.querySelector(".interaction__container"),w=document.querySelector(".loading-response"),y=document.querySelector(".result"),H=document.getElementById("form-container");let d=m.dataset.set,c=[];async function P(e,t){const a=await(await fetch(e)).text();H.innerHTML=a,t&&t()}async function $(e){for(let t=0;t<e.length;t++)await new Promise(o=>setTimeout(o,40)),m.textContent+=e.charAt(t),e.length>400&&(m.style.fontSize="1.8em",m.style.lineHeight="1.3");l.disabled=!1}async function Y(e){if(S.querySelector(`div[data-step='${d}']`).classList.add("complete"),m.textContent="",d++,d<=3)$(e),S.querySelector(`div[data-step='${d}']`).classList.add("active"),document.querySelector(".current-question").textContent=d;else{const o=e;c=[...c,{role:"assistant",content:o}];const a=document.querySelector(".insightText"),s=document.querySelector(".tasksList"),n=document.querySelector(".resourcesList");n.innerHTML="";const r=/%%Insight: (.+?)\n\n/,u=/%%Tasks:\n([\s\S]+?)\n\n/,i=/%%Resources:\n([\s\S]+?)$/,p=o.match(r),f=o.match(u),A=o.match(i),k=p&&p[1],L=f&&f[1],T=A&&A[1];if(k&&(a.textContent=k),L){const v=L.trim().split(`
`).map(b=>`<li>${b.trim()}</li>`).join("");s.innerHTML=v}if(T){const v=/(.+?) - \[(.+?)\]/g,b=T.trim().split(`
`).map(x=>{const g=v.exec(x);return g?`<li>${g[1]} - <a href="${g[2]}" target="_blank">${g[2]}</a></li>`:`<li>${x.trim()}</li>`}).join("");n.innerHTML=b}M()}}async function M(){E.style.transform="translateY(-200%)",w.classList.remove("hidden"),await new Promise(e=>setTimeout(e,200)),E.classList.add("hidden"),await new Promise(e=>setTimeout(e,2e3)),w.style.transform="translateY(-200%)",await new Promise(e=>setTimeout(e,400)),y.classList.remove("hidden"),y.style.transform="translateY(0)",w.classList.add("hidden")}function q(e){const t=document.querySelector(".errorMessage"),o=document.querySelector(".errorDiv");o.style.height="auto",t.textContent=e,t.style.transform="translateY(0)",t.style.opacity="1",setTimeout(()=>{t.style.transform="translateY(-100%)",t.style.opacity="0"},2e3),setTimeout(()=>{o.style.height="0",t.textContent=""},2400)}function h(e){const t=document.querySelector(e);return t.value.trim()===""?(t.classList.add("error","shake"),t.addEventListener("animationend",()=>{t.classList.remove("error","shake")}),!1):!0}async function R(){const e=await fetch("https://www.themirrorapp.io/questions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation:c})});return e.status!==200?(console.error(`Error ${e.status}: ${e.statusText}`),"An error occurred while fetching the question. Please try again later."):e.headers.get("Content-Type").includes("application/json")?(await e.json()).choices[0].text:(console.error("Invalid response format. Expected 'application/json'"),"An error occurred while fetching the question. Please try again later.")}function j(){const e=document.querySelector(".radioBtn:checked");if(e){const t=`/assets/components/${e.value}.html`;P(t,N)}}document.querySelectorAll(".radioBtn").forEach(e=>{e.addEventListener("click",()=>{const t=`/assets/components/${e.value}.html`;P(t,N)})});j();function N(){const e=document.querySelector("button.generate-question");e&&e.addEventListener("click",async t=>{t.preventDefault();const a=t.target.getAttribute("data-btn");if(a==="self-reflect"){const n=document.querySelector("#userName").value,r=document.querySelector("#focusArea").value,u=document.querySelector("#focusAreaDetail").value,i=h("#userName"),p=h("#focusArea"),f=h("#focusAreaDetail");if(!i||!p||!f){q("Please fill in the empty fields");return}c=[{role:"system",content:"You are an experienced life and mental coach. Start by asking your client the first question, which should encourage self-reflection. Follow the User instructions to complete the interaction. "},{role:"user",content:`Act as an experienced life and mental coach with a proven record of helping people attain greater fulfilment. Your role involves guiding clients in enhancing their relationships, careers, and everyday lives by clarifying their goals, identifying obstacles, and developing strategies to overcome these challenges. Here are some criteria that yoou must follow as a coach:Active Listening: A coach must actively listen to their clients, empathize with them, and understand their unique perspectives and experiences to provide tailored guidance. Clear Communication: A coach must be able to communicate clearly and effectively, both verbally and nonverbally, to help their clients understand the coaching process and the strategies being recommended. Goal-Setting: A coach must work with their clients to set specific, measurable, achievable, relevant, and time-bound (SMART) goals that align with their clients' values and aspirations. Action-Oriented Approach: A coach must help their clients develop actionable plans and strategies to achieve their goals and hold them accountable for taking concrete steps towards progress. Trust and Confidentiality: A coach must maintain a trusting and confidential relationship with their clients to ensure that clients feel safe and comfortable sharing their deepest concerns and challenges. Flexibility and Adaptability: A coach must be able to adapt their coaching approach and strategies to the unique needs and goals of each client, as well as adjust their approach if necessary as the coaching process progresses. Positive Reinforcement: A coach must provide positive reinforcement and encouragement to help their clients stay motivated and continue making progress towards their goals. .You will engage in a session with ${n}, focusing on the area of ${r}, specifically '${u}'. Begin by asking the first question, which should encourage self-reflection in ${r} but try not to overwhelm me by asking too deep question straight away. you will address me as ${n}. Your first response should be: Hello ${n}, [First Question]. Use a friendly tone and speak in the first person, as if you are talking to a friend.`}]}else if(a==="vant"){const n=document.querySelector("#userName").value,r=document.querySelector("#vanting").value,u=h("#vanting");if(!h("#userName")||!u){q("Please fill in the empty fields");return}c=[{role:"system",content:"You are an experienced life and mental coach. Start by asking your client the first question, which should encourage self-reflection. Follow the User instructions to complete the interaction. "},{role:"user",content:`Act as an experienced life and mental coach with a proven record of helping people attain greater fulfilment. Your role involves guiding clients in enhancing their relationships, careers, and everyday lives by clarifying their goals, identifying obstacles, and developing strategies to overcome these challenges. Here are some criteria that yoou must follow as a coach:Active Listening: A coach must actively listen to their clients, empathize with them, and understand their unique perspectives and experiences to provide tailored guidance. Clear Communication: A coach must be able to communicate clearly and effectively, both verbally and nonverbally, to help their clients understand the coaching process and the strategies being recommended. Goal-Setting: A coach must work with clients to set specific, measurable, achievable, relevant, and time-bound (SMART) goals that align with their client's values and aspirations. Action-Oriented Approach: A coach must help clients develop actionable plans and strategies to achieve their goals and hold them accountable for taking concrete steps towards progress. Trust and Confidentiality: A coach must maintain a trusting and confidential relationship with their clients to ensure they feel safe and comfortable sharing their deepest concerns and challenges. Flexibility and Adaptability: A coach must be able to adapt their coaching approach and strategies to the unique needs and goals of each client, as well as adjust their approach if necessary as the coaching process progresses. Positive Reinforcement: A coach must provide positive reinforcement and encouragement to help their clients stay motivated and continue making progress towards their goals. You will engage in a session with ${n}, he is currently experiencing some emotions, saying the following '${r}'. Begin by understanding and empathising, but try not to overwhelm me by asking too deep questions straight away. you will address me as ${n}. Your first response should be: Hello ${n}[response]. Use a friendly tone and speak in the first person, as if you are talking to a friend.`}]}e.disabled=!0,e.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Generating...';const s=await R();c.push({role:"assistant",content:s}),d=1,l.disabled=!0,I.classList.add("moveOut"),O.classList.add("moveIn"),setTimeout(()=>{S.querySelector("div[data-step='1']").classList.add("active"),I.classList.add("hidden")},500),$(s)})}l.addEventListener("click",async function(e){e.preventDefault();const t=C.value.trim();if(!t){q("Please enter your response");return}l.disabled=!0,l.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Sending...';let o;d===3?o=t+" Provide an Insight, assign three specific tasks for the next session and add resources. Set tasks that are manageable, trackable, and attainable. The goal is to Prepare the user for the next session by giving assignments and resources like books, podcasts, articles, and youtube videos. Anything useful for the client. You will follow up on those in the next session. Can you please format the response as follows: %%Insight: <Insight> %%Tasks: 1.<Task 1> 2.<Task 2> 3.<Task 3> %% Resources: <resource 1> <resource 2> <resource 3>. The '%%' is important, don't avoid it. For example Insight: You are a great person / Tasks: 1. Do this 2. Do that 3. Do the other thing. resource: 1. book 2. podcast 3. article. Add links to the resources  ":o=" Provide a follow-up question that will help you to understand the client's perspective on their reflection. "+t,c=[...c,{role:"user",content:o}];try{const n=(await(await fetch(B,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({prompt:c})})).json()).message.trim(),r={role:"assistant",content:n};c.push(r),l.innerHTML="Answer",l.disabled=!0,C.value="",Y(n)}catch(a){console.error(a)}});D.addEventListener("click",()=>{const e=document.querySelector(".DownloadReport");y.style.transform="translateY(200%)",y.classList.add("hidden"),e.classList.remove("hidden"),setTimeout(()=>{window.scrollTo(0,0),e.style.transform="translateY(0)"},500)});const F=Stripe("pk_live_UokfO3BfglTlhkt0XZ4HJtQe");document.getElementById("donation-form").addEventListener("submit",async e=>{e.preventDefault();const t=parseFloat(document.getElementById("donation-amount").value)*100,a=await(await fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t})})).text();console.log("Response from server:",a);const{client_secret:s}=JSON.parse(a),n=await F.confirmCardPayment(s,{payment_method:{card:cardElement}});n.error?console.error(n.error.message):console.log("Donation successful:",n.paymentIntent)});document.querySelector(".SubmitInfo").addEventListener("click",async e=>{e.preventDefault();const t=e.target,o=document.getElementById("greeting"),a=userName,s=document.getElementById("email").value,n="83635650801174350";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){document.getElementById("email").classList.add("error","shake"),setTimeout(()=>{document.getElementById("email").classList.remove("error","shake")},1e3),t.disabled=!1,t.innerHTML="Submit Info";return}if(a&&s){t.disabled=!0,t.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...';try{const i=await fetch("https://www.themirrorapp.io/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,name:a,groupId:n})});i.ok?(o.textContent="Thanks for signing up! I'll be in touch soon.",console.log("Successfully added subscriber:",await i.json()),t.disabled=!1,t.classList.add("hidden")):(o.textContent="Something went wrong. Please try again.",console.error("Error adding subscriber:",await i.json()))}catch(i){console.error("Error adding subscriber:",i)}}});
